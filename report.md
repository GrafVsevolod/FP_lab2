# Отчёт по лабораторной работе №2 (ФП, Elixir)

## Титульный лист
**Студент:** Юрисов Всеволод Евгеньевич  
**Дисциплина:** Функциональное программирование  
**Лабораторная работа №2:** Пользовательские структуры данных + тестирование  
**Вариант:** AVL-dict (на базе AVL-дерева)  
**Язык:** Elixir  
**Средства тестирования:** ExUnit (unit), StreamData (property-based)

---

## Требования к разработанному ПО

Реализовать неизменяемую (immutable) полиморфную структуру данных согласно варианту.

**Интерфейс (Dict):**
- добавление / обновление: `put/3`
- получение: `get/2`
- удаление: `delete/2`
- размер: `size/1`
- фильтрация: `filter/2`
- отображение: `map/2`
- свёртки: `foldl/3` и `foldr/3`
- структура должна образовывать **моноид** (операция объединения + нейтральный элемент)

**Дополнительно:**
- на базе Dict реализованы структуры:
  - `Set` (множество)
  - `Bag` (мультимножество)
- unit тестирование для публичного API
- property-based тестирование (минимум 3 свойства, включая свойства моноида)
- эффективное сравнение структур (без приведения к спискам и сортировки)

---

## Ключевые элементы реализации

### 1) Внутренняя реализация: AVL-дерево (`Lab2.Impl.AVL`)
Dict хранит пары `{key, value}` в AVL-дереве (самобалансирующееся бинарное дерево поиска).
После операций вставки/удаления выполняется балансировка с помощью вращений.

Ключевые идеи:
- **иммутабельность:** каждая операция возвращает новое дерево, старое не меняется
- **полиморфизм:** ключи/значения — любые термы Elixir
- **балансировка:** поддержание высоты и выполнение rotations

### 2) Публичный API: `Lab2.Dict`
`Dict` — это оболочка над `impl`, которая “не протекает наружу”:
- `Dict.new/0` создаёт пустую структуру (AVL)
- `Dict.put/get/delete/size/foldl/foldr` прокидывают операции в AVL
- `filter/map` реализованы через `foldl`

### 3) `Set` и `Bag`
- `Set` реализован через `Dict`, где значение фиктивное (например `true`)
- `Bag` реализован через `Dict`, где значение — счётчик (количество элементов)

---

## Тестирование

### Unit testing (ExUnit)
Проверяются основные операции публичного API:
- корректность `put/get/delete`
- корректность `size`
- корректность `map/filter`
- корректность поведения `Set` и `Bag`

### Property-based testing (StreamData)
Проверяются свойства:
1. **Моноид: нейтральный элемент**  
   `mempty <> x == x` и `x <> mempty == x`
2. **Моноид: ассоциативность**  
   `(a <> b) <> c == a <> (b <> c)`
3. **Связь API:** после `put(k,v)` структура содержит `k` и `get(k)` возвращает `v`

---

## Отчёт инструментов и метрики

### Запуск тестов
Команда:
```bash
mix test
